<!DOCTYPE html>
<!--
For production version, add manifest and use:
<html manifest="cache.manifest">
-->
<html>
<head>
    <title>Tigatrapp</title>
    <meta charset="UTF-8">
    <meta Name="description" Content="Tigatrapp HTML5 web application.">
    <meta HTTP-EQUIV="description" Content="Tigatrapp HTML5 web application.">
    <meta Name="keywords" Content="mosquito, mosquitoes, tiger mosquitoes, invasive species, disease vectors">
    <meta HTTP-EQUIV="keywords" Content="mosquito, mosquitoes, tiger mosquitoes, invasive species, disease vectors">
    <meta Name="author" Content="John R.B. Palmer, Movement Ecology Lab">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="themes/tigatheme.min.css" />
    <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="jquery.mobile.structure-1.4.2.min.css" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="tigastyle.css">
    <link rel="apple-touch-icon-precomposed" href="images/ic_launcher.png">
    <link rel="apple-touch-startup-image" href="images/ic_launcher-web.png">
    <link rel="icon" type="image/jpg" href="images/ic_launcher.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src="jquery-1.11.1.min.js"></script>
    <script src="jquery.mobile-1.4.2.min.js"></script>
    <script src="js/gallery.js"></script>
    <script src="js/localization.js"></script>
    <script src="js/formmanager.js"></script>
    <script src="js/uuid.js"></script>
</head>
<body>
<!-- Start of first page -->
<div data-role="page" id="switchboard">

    <div data-role="header">
        <h1>Tigatrapp</h1>
    </div><!-- /header -->

    <script type="text/javascript">
        // TODO: Ask for consent
            if(localStorage.getItem("user_uuid")==null) {
                console.log("Creating UUID");
                var uuid = uuid.v4();
                var mData = { "user_uuid": uuid };
                console.log(uuid);
                $.ajax({
                    type: "POST",
                    beforeSend: function(request) {
                        request.setRequestHeader("Accept", "application/json");
                        request.setRequestHeader("Content-type", "application/json");
                        request.setRequestHeader("Authorization",  "Token 3791ad3995d31cfb56add03030a804a7436079cc");
                    },
                    url: "http://tigaserver.atrapaeltigre.com/api/users/",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({ "user_uuid": uuid }),
                    dataType: "json",
                    success: function(data) {
                        alert(data);
                        localStorage["user_uuid"] = uuid;
                    },
                    error: function(error) {
                        console.log(error.responseText);
                    }
                });
            }
            console.log("A user UUID exists");
            console.log(localStorage.getItem("user_uuid"));
        // TODO: Send to server
    </script>
    <div role="main" class="ui-content">

        <div class="switchboard-content-wrapper">
            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <a href="#" data-theme="" id="menu_button"> <img src="images/ic_collections_view_as_grid_large.png" width="10%"></a>
                </div>
            </div>


            <div class="ui-grid-a">
                <div class="ui-block-a"><a href="#report_site" data-theme="" id="switchboard_button_site"> <img src="images/ic_switchboard_icon_breeding_site_large.png" width="55%"></a>
                </div>
                <div class="ui-block-b"><a href="#report_adult" data-theme="" id="switchboard_button_adult"> <img src="images/ic_switchboard_icon_adult_large.png" width="55%"></a>
                </div>
                <div class="ui-block-a"><a href="#map" data-theme="" id="switchboard_button_map"> <img src="images/ic_switchboard_icon_map_large.png" width="55%"></a>
                </div>
                <div class="ui-block-b"><a href="#gallery" data-theme="" id="switchboard_button_gallery"> <img src="images/ic_switchboard_icon_gallery_large.png" width="55%"></a>
                </div>
            </div>

            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <a href="http://atrapaeltigre.com" data-theme="" id="tigatrapp_website_link"> <img src="images/atrapaeltigre_site_icon_large.png" width="20%"></a>
                </div>
            </div>

        </div>
    </div><!-- /content -->

</div><!-- /page -->

<!-- Start of second page -->
<div data-role="page" id="report_adult">
    <div data-role="header">
        <h1>Tigatrapp</h1>
        <a href="/tigawapp.html" class="ui-btn-left localizable" data-lclstring="html5_home" data-icon="home" data-iconpos="left" data-direction="reverse"></a><!-- home button -->
    </div><!-- /header -->
    <div role="main" class="ui-content">
        <!--To be added-->
        <form id="adult_form" >     <!-- Adult report form -->
            <div class="ui-grid-d">
                <div class="ui-block-a"><h2 class="localizable" data-lclstring="report_title_adult"></h2></div>
                <div class="ui-block-b">
                    <a href="#adultHelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                    <div data-role="popup" id="adultHelpPopup">
                        <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                        <p class="localizable" data-lclstring="adult_report_help_html"></p>
                    </div>
                </div>

            </div>

            <div class="ui-field-contain" >      <!-- Description checkbox -->
                <input type="checkbox" name="checkbox-description" id="checkbox-description" class="custom" />
                <label for="checkbox-description" class="localizable" data-lclstring="checklist_label"></label>

            </div>

            <div class="ui-field-contain"  id="description-0">  <!-- Description: First question -->
                <label id="label-select-description-0" for="select-description-0" class="select localizable" data-lclstring="confirmation_q1_adult_sizecolor"></label>
                <a href="#description0HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="description0HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="q1_sizecolor_text"></p>
                    <img class="popphoto" src="images/checklist_image_adult_1.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-description-0" id="select-description-0" >
                    <option value="yes" class="localizable" data-lclstring="yes"></option>
                    <option value="no" class="localizable" data-lclstring="no"></option>
                    <option value="dontknow" class="localizable" data-lclstring="dontknow"></option>
                </select>
            </div>

            <div class="ui-field-contain"  id="description-1">  <!-- Description: Second question -->
                <label id="label-select-description-1" for="select-description-1" class="select localizable" data-lclstring="confirmation_q2_adult_headthorax"></label>
                <a href="#description1HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="description1HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="q3_headthorax_text"></p>
                    <img class="popphoto" src="images/checklist_image_adult_2.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-description-1" id="select-description-1" >
                    <option value="yes" class="localizable" data-lclstring="yes"></option>
                    <option value="no" class="localizable" data-lclstring="no"></option>
                    <option value="dontknow" class="localizable" data-lclstring="dontknow"></option>
                </select>
            </div>
            <div class="ui-field-contain"  id="description-2"> <!-- Description: Third question -->
                <label id="label-select-description-2" for="select-description-2" class="select localizable" data-lclstring="adult_report_q3"></label>
                <a href="#description2HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="description2HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="q2_abdomenlegs_text"></p>
                    <img class="popphoto" src="images/checklist_image_adult_3.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-description-2" id="select-description-2" >
                    <option value="yes" class="localizable" data-lclstring="yes"></option>
                    <option value="no" class="localizable" data-lclstring="no"></option>
                    <option value="dontknow" class="localizable" data-lclstring="dontknow"></option>
                </select>
            </div>

            <div class="ui-field-contain" >      <!-- Location checkbox -->

                <input type="checkbox" name="checkbox-location" id="checkbox-location" class="custom" />
                <label for="checkbox-location" class="localizable" data-lclstring="location_label"></label>
            </div>

            <div data-role="ui-field-contain" id="location-options">
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <input type="radio" name="location-choice-1" id="location-choice-1" value="choice-1" />
                    <label for="location-choice-1" class="localizable" data-lclstring="location_current_label"></label>

                    <input type="radio" name="location-choice-1" id="location-choice-2" value="choice-2" />
                    <label for="location-choice-2" class="localizable" data-lclstring="location_select_label"></label>
                </fieldset>

                <div id="mapView">
                </div>
                <label for="mapView" id="mapCoordinates"></label>
            </div>

            <div class="ui-field-contain" >      <!-- Photos checkbox -->
                <input type="checkbox" name="checkbox-photos" id="checkbox-photos" class="custom" />
                <label for="checkbox-photos" class="localizable" data-lclstring="photo_label"></label>

                <input type="file" id="attachment" name="attachment" />
            </div>

            <div class="ui-field-contain" >      <!-- Notes checkbox -->
                <input type="checkbox" name="checkbox-notes" id="checkbox-notes" class="custom" />
                <label for="checkbox-notes" class="localizable" data-lclstring="note_check_label"></label>
            </div>
            <div class="ui-field-contain"  id="notes">
                <label for="checkbox-notes-text" class="localizable" data-lclstring="type_here"></label>
                <input type="text" name="checkbox-notes-text" id="checkbox-notes-text" value="" />
            </div>


            <div class="ui-body ui-body-b">      <!-- Submit buttons -->
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a"><button type="submit" class="localizable" data-lclstring="cancel"></button></div>
                    <div class="ui-block-b"><button type="submit" class="localizable" data-lclstring="submit"></button></div>
                </fieldset>
            </div>
        </form>
    </div><!-- /content -->
</div><!-- /page -->

<!-- Start of thid page -->
<div data-role="page" id="report_site">
    <div data-role="header">
        <h1>Tigatrapp</h1>
        <a href="/tigawapp.html" class="ui-btn-left localizable" data-lclstring="html5_home" data-icon="home" data-iconpos="left" data-direction="reverse"></a><!-- home button -->
    </div><!-- /header -->
    <div role="main" class="ui-content">
        <!--To be added -->

        <form id="site_form">     <!-- Site report form -->
            <div class="ui-grid-d">
                <div class="ui-block-a"><h2 class="localizable" data-lclstring="report_title_site"></h2></div>
                <div class="ui-block-b">
                    <a href="#siteHelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                    <div data-role="popup" id="siteHelpPopup">
                        <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                        <p class="localizable" data-lclstring="site_report_help_html"></p>
                    </div>
                </div>

            </div>


            <div class="ui-field-contain" >      <!-- Description checkbox -->
                <input type="checkbox" name="checkbox-site-description" id="checkbox-site-description" class="custom" />
                <label for="checkbox-site-description" class="localizable" data-lclstring="checklist_label"></label>
            </div>

            <div class="ui-field-contain"  id="site-description-0">  <!-- Description: First question -->
                <label id="label-select-site-description-0" for="select-site-description-0" class="select localizable" data-lclstring="site_report_q1"></label>
                <a href="#siteDescription0HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="siteDescription0HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="site_report_item_help_1"></p>
                    <img class="popphoto" src="images/checklist_image_sites_1.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-site-description-0" id="select-site-description-0" >
                    <option value="embornals" class="localizable" data-lclstring="embornals"></option>
                    <option value="fonts" class="localizable" data-lclstring="fonts"></option>
                    <option value="basses" class="localizable" data-lclstring="basses"></option>
                    <option value="pous" class="localizable" data-lclstring="pous"></option>
                    <option value="altres" class="localizable" data-lclstring="altres"></option>
                </select>
            </div>

            <div class="ui-field-contain"  id="site-description-1">  <!-- Description: Second question -->
                <label id="label-select-site-description-1"  for="select-site-description-1" class="select localizable" data-lclstring="site_report_q2"></label>
                <a href="#siteDescription1HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="siteDescription1HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="site_report_item_help_2"></p>
                    <img class="popphoto" src="images/checklist_image_sites_2.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-site-description-1" id="select-site-description-1" >
                    <option value="yes" class="localizable" data-lclstring="yes"></option>
                    <option value="no" class="localizable" data-lclstring="no"></option>
                </select>
            </div>
            <div class="ui-field-contain"  id="site-description-2"> <!-- Description: Third question -->
                <label id="label-select-site-description-2"  for="select-site-description-2" class="select localizable" data-lclstring="site_report_q3"></label>
                <a href="#siteDescription2HelpPopup" data-role="button" data-icon="info" data-iconpos="notext" data-rel="popup"></a>
                <div data-role="popup" id="siteDescription2HelpPopup" style="max-width:300px;">
                    <p class="localizable" data-lclstring="site_report_item_help_3"></p>
                    <img class="popphoto" src="images/checklist_image_sites_3.jpg"/>
                    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                </div>
                <select name="select-site-description-2" id="select-site-description-2" >
                    <option value="yes" class="localizable" data-lclstring="yes"></option>
                    <option value="no" class="localizable" data-lclstring="no"></option>
                    <option value="dontknow" class="localizable" data-lclstring="dontknow"></option>
                </select>
            </div>

            <div class="ui-field-contain" >      <!-- Location checkbox -->

                <input type="checkbox" name="checkbox-site-location" id="checkbox-site-location" class="custom" />
                <label for="checkbox-site-location" class="localizable" data-lclstring="location_label"></label>
            </div>

            <div data-role="ui-field-contain" id="site-location-options">
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <input type="radio" name="site-location-choice-1" id="site-location-choice-1" value="choice-1"  />
                    <label for="site-location-choice-1" class="localizable" data-lclstring="location_current_label"></label>

                    <input type="radio" name="site-location-choice-1" id="site-location-choice-2" value="choice-2" />
                    <label for="site-location-choice-2" class="localizable" data-lclstring="location_select_label"></label>
                </fieldset>

                <div id="site-mapView">
                </div>
                <label for="site-mapView" id="site-mapCoordinates"></label>
            </div>

            <div class="ui-field-contain" >      <!-- Photos checkbox -->
                <input type="checkbox" name="checkbox-site-photos" id="checkbox-site-photos" class="custom" />
                <label for="checkbox-site-photos" class="localizable" data-lclstring="photo_label"></label>

                <input type="file" id="site-attachment" name="site-attachment" />
            </div>

            <div class="ui-field-contain" >      <!-- Notes checkbox -->
                <input type="checkbox" name="checkbox-site-notes" id="checkbox-site-notes" class="custom" />
                <label for="checkbox-site-notes" class="localizable" data-lclstring="note_check_label"></label>

            </div>
            <div class="ui-field-contain"  id="site-notes">
                <label for="checkbox-site-notes-text" class="localizable" data-lclstring="type_here"></label>
                <input type="text" name="checkbox-site-notes-text" id="checkbox-site-notes-text" value="" />
            </div>


            <div class="ui-body ui-body-b">     <!-- Submit buttons -->
                <fieldset class="ui-grid-a">
                    <div class="ui-block-a"><button type="submit" class="localizable" data-lclstring="cancel"></button></div>
                    <div class="ui-block-b"><button type="submit" class="localizable" data-lclstring="submit"></button></div>
                </fieldset>
            </div>
        </form>
    </div><!-- /content -->
</div><!-- /page -->


<!-- Start of fourth page -->
<div data-role="page" id="map">
    <div data-role="header" id="mapHeader">
        <h1>Tigatrapp</h1>
        <a href="/tigawapp.html" class="ui-btn-left localizable" data-lclstring="html5_home" data-icon="home" data-iconpos="left" data-direction="reverse"></a><!-- home button -->
    </div><!-- /header -->
    <div role="main" class="ui-content">
        <!--To be added-->
        <iframe frameborder="0" scrolling="no" height="100%" width="100%" id="mapFrame" src="http://tigaserver.atrapaeltigre.com/webmap/embedded/"></iframe>
        <script type="text/javascript">
            // Let's try to fit map on screen
            $(document).on('pageshow', function() {
                var windowHeight = $(window).height();
                var headerHeight = $("#mapHeader").height();

                // Expected height is window - header
                var realHeight = windowHeight - headerHeight;

                $("#mapFrame").height(realHeight);
                $("#mapFrame").css({ top: headerHeight }); // position under header
            });
        </script>
    </div><!-- /content -->
</div><!-- /page -->

<!-- Start of fifth page -->
<div data-role="page" id="gallery">
    <div data-role="header">
        <h1>Tigatrapp</h1>
        <a href="/tigawapp.html" class="ui-btn-left localizable" data-lclstring="html5_home" data-icon="home" data-iconpos="left" data-direction="reverse"></a><!-- home button -->
    </div><!-- /header -->
    <div role="main" class="ui-content">
        <!--To be added-->
        <div class="ui-grid-a">
            <div class="ui-block-a"><button class="localizable" data-lclstring="html5_gallery_prev" id="previmg" type="button" data-theme="a" data-icon="arrow-l" data-iconpos="left"></button></div>
            <div class="ui-block-b"><button class="localizable" data-lclstring="html5_gallery_next" id="nextimg" type="button" data-theme="a" data-icon="arrow-r" data-iconpos="right"></button></div>
        </div>
        <div class="ui-grid-solo">
            <div id="galleryImg" class="ui-block-a">
                <!-- gallery.js -->
            </div>

        </div>
    </div><!-- /content -->
</div><!-- /page -->

<!-- Popups -->

</body>
</html>	
